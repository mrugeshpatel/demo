package com.jpmc.theater.client;

import org.springframework.boot.web.client.RestTemplateBuilder;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpMethod;
import org.springframework.http.MediaType;
import org.springframework.stereotype.Component;
import org.springframework.web.client.RestTemplate;

import com.jpmc.theater.vo.BookingRequest;

@Component
public class ShowBookingClient {

	 private final RestTemplate restTemplate;
	 
	 public ShowBookingClient(RestTemplateBuilder restTemplateBuilder) {
		 this.restTemplate = restTemplateBuilder.rootUri("http://localhost:8080/").build();
	 }
	 
	 public void getSingleUser(Long id) {
		 HttpHeaders headers = new HttpHeaders();
		 headers.setContentType(MediaType.APPLICATION_JSON);
	     HttpEntity<Void> requestEntity = new HttpEntity<>(headers);
	     return this.restTemplate
	      .exchange("/api/users/{id}", HttpMethod.POST, requestEntity, BookingRequest.class, id)
	      .getBody();
	 
	 }
}
